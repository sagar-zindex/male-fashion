{% comment %}
  This section is used in the blog template to render the blog page listing all
  articles within a blog.

  https://shopify.dev/docs/storefronts/themes/architecture/templates/blog
{% endcomment %}

<!-- Blog Section Begin -->

{% assign articles_per_page = section.settings.articles_per_page | default: 6 %}

{% paginate blog.articles by articles_per_page %}
  <section class="blog spad">
    <div class="container">
      <div class="row">
        {% for article in blog.articles %}
          {% assign title = article.title %}
          {% assign permalink = article.url %}
          {% assign thumbnail_image = article.image %}
          {% assign date = article.published_at | date: '%d %B %Y' %}
          <div class="col-lg-4 col-md-6 col-sm-6">
            <div class="blog__item">
              {% if thumbnail_image != blank %}
                <div class="blog__item__pic set-bg" data-setbg="{{ thumbnail_image | image_url }}"></div>
              {% endif %}
              <div class="blog__item__text">
                <span class="blog-date">
                  <img src="{{ 'calendar.png' | asset_url }}" alt="Published date icon">
                  {{ date }}
                </span>

                <h5>{{ title }}</h5>

                <a href="{{ permalink }}">Read More</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
      {% if paginate.pages > 1 %}
        <div class="pagination">
          {{ paginate | default_pagination }}
        </div>

        <style>
          .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-top: 48px;
          }

          .pagination a {
            padding: 0 16px;
          }

          .pagination a,
          .pagination span {
            min-width: 44px;
            height: 44px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #d9d9d9;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 500;
            line-height: 1;
            color: #111;
            background: #fff;
            text-decoration: none;
            transition: all 0.25s ease;
          }

          .pagination a:hover {
            background: #111;
            color: #fff;
            border-color: #111;
          }

          .pagination .current,
          .pagination span[aria-current='page'] {
            background: #000;
            color: #fff;
            border-color: #000;
            cursor: default;
          }

          .pagination .prev,
          .pagination .next {
            font-weight: 500;
          }

          .pagination .disabled {
            opacity: 0.4;
            pointer-events: none;
          }

          @media (max-width: 767px) {
            .pagination {
              gap: 8px;
            }

            .pagination a {
              padding: 0 14px;
            }

            .pagination a,
            .pagination span {
              min-width: 38px;
              height: 38px;
              font-size: 14px;
            }

            .pagination .prev,
            .pagination .next {
              padding: 0 14px;
            }
          }
        </style>
      {% endif %}
    </div>
  </section>
{% endpaginate %}
<!-- Blog Section End -->

{% schema %}
{
  "name": "Blog Listing Section",
  "settings": [
    {
      "type": "number",
      "id": "articles_per_page",
      "label": "Articles per page"
    }
  ]
}
{% endschema %}
